<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flood Prediction System | AI-Powered</title>
  <meta name="description" content="AI-powered flood prediction system using machine learning to analyse rainfall and cloud cover data." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    /* â”€â”€ Reset & tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --blue-900:  #0c1930;
      --blue-800:  #0f2443;
      --blue-700:  #173360;
      --blue-500:  #2563eb;
      --blue-400:  #3b82f6;
      --blue-300:  #60a5fa;
      --cyan-400:  #22d3ee;
      --teal-400:  #2dd4bf;
      --red-400:   #f87171;
      --red-500:   #ef4444;
      --green-400: #4ade80;
      --green-500: #22c55e;
      --text-100:  rgba(255,255,255,0.95);
      --text-60:   rgba(255,255,255,0.60);
      --text-40:   rgba(255,255,255,0.40);
      --glass-bg:  rgba(255,255,255,0.05);
      --glass-bdr: rgba(255,255,255,0.10);
      --radius-lg: 20px;
      --radius-md: 14px;
      --shadow-xl: 0 25px 50px rgba(0,0,0,0.5);
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(ellipse at 20% 10%, #1e3a8a 0%, var(--blue-900) 50%, #0a1628 100%);
      min-height: 100vh;
      color: var(--text-100);
      overflow-x: hidden;
    }

    /* â”€â”€ Animated background rain drops â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .rain-bg {
      position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden;
    }
    .drop {
      position: absolute; top: -20px; width: 2px; background: linear-gradient(to bottom, transparent, rgba(96,165,250,0.3));
      animation: fall linear infinite;
    }
    @keyframes fall {
      to { transform: translateY(110vh); opacity: 0; }
    }

    /* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .container {
      position: relative; z-index: 1;
      max-width: 900px; margin: 0 auto;
      padding: 40px 20px 80px;
    }

    /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .header { text-align: center; margin-bottom: 50px; }

    .badge {
      display: inline-flex; align-items: center; gap: 8px;
      background: var(--glass-bg); border: 1px solid var(--glass-bdr);
      border-radius: 100px; padding: 8px 18px; font-size: 12px; font-weight: 600;
      letter-spacing: 1px; text-transform: uppercase; color: var(--cyan-400);
      margin-bottom: 20px; backdrop-filter: blur(8px);
    }
    .badge-dot {
      width: 7px; height: 7px; border-radius: 50%; background: var(--cyan-400);
      animation: pulse 2s ease-in-out infinite;
    }
    @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.5;transform:scale(1.4)} }

    .header h1 {
      font-size: clamp(2rem, 5vw, 3.2rem);
      font-weight: 800; line-height: 1.15;
      background: linear-gradient(135deg, var(--text-100) 0%, var(--cyan-400) 60%, var(--teal-400) 100%);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
      margin-bottom: 16px;
    }
    .header p {
      font-size: 1rem; color: var(--text-60); max-width: 550px; margin: 0 auto;
      line-height: 1.75;
    }

    /* â”€â”€ Stat bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .stats {
      display: flex; justify-content: center; gap: 32px; flex-wrap: wrap;
      margin-bottom: 40px;
    }
    .stat-item { text-align: center; }
    .stat-value { font-size: 1.8rem; font-weight: 800; color: var(--cyan-400); display: block; }
    .stat-label { font-size: 0.72rem; color: var(--text-60); text-transform: uppercase; letter-spacing: 1px; }

    /* â”€â”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .card {
      background: var(--glass-bg);
      border: 1px solid var(--glass-bdr);
      border-radius: var(--radius-lg);
      padding: 36px 40px;
      backdrop-filter: blur(16px);
      box-shadow: var(--shadow-xl);
    }

    .card-title {
      font-size: 1.1rem; font-weight: 700; color: var(--text-100);
      display: flex; align-items: center; gap: 10px; margin-bottom: 28px;
    }
    .card-title .icon {
      width: 36px; height: 36px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 18px;
    }
    .icon-blue  { background: rgba(37,99,235,0.25); }
    .icon-cyan  { background: rgba(34,211,238,0.15); }

    /* â”€â”€ Form Grid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .form-grid {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px;
      margin-bottom: 28px;
    }

    .field { display: flex; flex-direction: column; gap: 8px; }

    .field label {
      font-size: 0.8rem; font-weight: 600; color: var(--text-60);
      text-transform: uppercase; letter-spacing: 0.8px;
      display: flex; align-items: center; gap: 6px;
    }
    .field label .unit-tag {
      font-size: 0.65rem; background: rgba(96,165,250,0.15);
      color: var(--blue-300); border-radius: 6px; padding: 2px 7px;
      font-weight: 600; letter-spacing: 0.5px;
    }

    .field input {
      width: 100%; padding: 13px 16px;
      background: rgba(255,255,255,0.07); border: 1.5px solid rgba(255,255,255,0.12);
      border-radius: var(--radius-md); color: var(--text-100);
      font-size: 0.95rem; font-family: inherit; outline: none;
      transition: var(--transition);
    }
    .field input:focus {
      border-color: var(--blue-400);
      background: rgba(59,130,246,0.1);
      box-shadow: 0 0 0 3px rgba(59,130,246,0.15);
    }
    .field input:hover { border-color: rgba(255,255,255,0.25); }
    .field input::placeholder { color: var(--text-40); }
    .field input::-webkit-inner-spin-button { opacity: 0.4; }

    /* â”€â”€ Submit button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .btn {
      width: 100%; padding: 15px 32px;
      background: linear-gradient(135deg, var(--blue-500) 0%, var(--blue-700) 100%);
      border: none; border-radius: var(--radius-md);
      color: white; font-size: 1rem; font-weight: 700; font-family: inherit;
      cursor: pointer; letter-spacing: 0.5px;
      transition: var(--transition);
      display: flex; align-items: center; justify-content: center; gap: 10px;
      position: relative; overflow: hidden;
    }
    .btn::before {
      content: ''; position: absolute; inset: 0;
      background: linear-gradient(135deg, var(--cyan-400) 0%, var(--blue-500) 100%);
      opacity: 0; transition: var(--transition);
    }
    .btn:hover::before { opacity: 0.2; }
    .btn:hover { transform: translateY(-1px); box-shadow: 0 8px 24px rgba(37,99,235,0.45); }
    .btn:active { transform: translateY(0); }
    .btn.loading { pointer-events: none; opacity: 0.75; }

    .btn-text { position: relative; display: inline-block; }
    .spinner {
      width: 18px; height: 18px; border: 2.5px solid rgba(255,255,255,0.3);
      border-top-color: white; border-radius: 50%;
      animation: spin 0.8s linear infinite; display: none; position: relative;
    }
    .btn.loading .spinner { display: block; }
    .btn.loading .btn-text { display: none; }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ Result card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .result {
      margin-top: 28px; border-radius: var(--radius-md);
      padding: 28px 30px; display: none;
      animation: slideIn 0.45s cubic-bezier(0.34,1.56,0.64,1);
    }
    @keyframes slideIn {
      from { opacity:0; transform: translateY(20px) scale(0.98); }
      to   { opacity:1; transform: translateY(0) scale(1); }
    }

    .result.flood {
      background: linear-gradient(135deg, rgba(239,68,68,0.18) 0%, rgba(239,68,68,0.05) 100%);
      border: 1.5px solid rgba(239,68,68,0.35);
    }
    .result.no-flood {
      background: linear-gradient(135deg, rgba(34,197,94,0.18) 0%, rgba(34,197,94,0.05) 100%);
      border: 1.5px solid rgba(34,197,94,0.35);
    }

    .result-header { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
    .result-icon { font-size: 2.4rem; line-height: 1; }
    .result-title { font-size: 1.4rem; font-weight: 800; }
    .result.flood .result-title    { color: var(--red-400); }
    .result.no-flood .result-title { color: var(--green-400); }
    .result-subtitle { font-size: 0.85rem; color: var(--text-60); margin-top: 3px; }

    .confidence-bar-wrap { margin-top: 4px; }
    .confidence-label { font-size: 0.8rem; color: var(--text-60); margin-bottom: 8px; }
    .confidence-bar {
      height: 8px; border-radius: 100px;
      background: rgba(255,255,255,0.1); overflow: hidden;
    }
    .confidence-fill {
      height: 100%; border-radius: 100px;
      transition: width 1s cubic-bezier(0.34,1.56,0.64,1);
    }
    .result.flood    .confidence-fill { background: linear-gradient(90deg, var(--red-500), var(--red-400)); }
    .result.no-flood .confidence-fill { background: linear-gradient(90deg, var(--green-500), var(--green-400)); }

    .result-advice {
      margin-top: 18px; padding: 12px 16px;
      background: rgba(255,255,255,0.04); border-radius: 10px;
      font-size: 0.85rem; color: var(--text-60); line-height: 1.65;
    }

    /* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    .footer {
      text-align: center; margin-top: 50px;
      font-size: 0.78rem; color: var(--text-40);
    }
    .footer span { color: var(--blue-300); font-weight: 600; }

    /* â”€â”€ Responsive â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    @media (max-width: 600px) {
      .card { padding: 24px 20px; }
      .form-grid { grid-template-columns: 1fr; }
      .stats { gap: 20px; }
    }
  </style>
</head>
<body>

  <!-- Animated rain background -->
  <div class="rain-bg" id="rainBg"></div>

  <div class="container">

    <!-- Header -->
    <div class="header">
      <!-- <div class="badge"><span class="badge-dot"></span> AI-Powered System</div> -->
      <h1>Flood Prediction<br/>System</h1>
      <p>Enter rainfall and cloud cover data below to instantly assess flood risk using our XGBoost machine learning model.</p>
    </div>

    <!-- Stats bar -->
    <div class="stats">
      <div class="stat-item">
        <span class="stat-value">96.5%</span>
        <span class="stat-label">Model Accuracy</span>
      </div>
      <div class="stat-item">
        <span class="stat-value">XGB</span>
        <span class="stat-label">Algorithm</span>
      </div>
      <!-- <div class="stat-item">
        <span class="stat-value">115</span>
        <span class="stat-label">Training Records</span>
      </div> -->
      <div class="stat-item">
        <span class="stat-value">5</span>
        <span class="stat-label">Features</span>
      </div>
    </div>

    <!-- Prediction Form -->
    <div class="card">
      <div class="card-title">
        <div class="icon icon-blue">ğŸŒ§ï¸</div>
        Enter Weather &amp; Rainfall Data
      </div>

      <form id="predictForm">
        <div class="form-grid">
          {% for f in features %}
          <div class="field">
            <label for="{{ f.key }}">
              {{ f.label }}
              <span class="unit-tag">{{ f.unit }}</span>
            </label>
            <input id="{{ f.key }}" name="{{ f.key }}" type="number"
                   min="{{ f.min }}" max="{{ f.max }}" step="{{ f.step }}" 
                   placeholder="e.g. {{ (f.min + f.max) // 3 }}" required />
          </div>
          {% endfor %}
        </div>

        <button type="submit" class="btn" id="submitBtn">
          <div class="spinner"></div>
          <span class="btn-text" id="btnText">Predict Flood Risk</span>
        </button>
      </form>

      <!-- Result -->
      <div class="result" id="result">
        <div class="result-header">
          <div class="result-icon" id="resultIcon">ğŸŒŠ</div>
          <div>
            <div class="result-title" id="resultTitle">Loadingâ€¦</div>
            <div class="result-subtitle" id="resultSubtitle"></div>
          </div>
        </div>
        <div class="confidence-bar-wrap">
          <div class="confidence-label" id="confidenceLabel"></div>
          <div class="confidence-bar">
            <div class="confidence-fill" id="confidenceFill" style="width:0%"></div>
          </div>
        </div>
        <div class="result-advice" id="resultAdvice"></div>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      Floods Prediction System &mdash; Powered by <span>XGBoost &amp; Flask</span>
      &middot; Built with Machine Learning
    </div>
  </div>

  <script>
    /* â”€â”€ Feature data from server â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    const FEATURES = JSON.parse('{{ features | tojson | safe }}');

    /* â”€â”€ Rain animation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    (function createRain() {
      const bg = document.getElementById('rainBg');
      for (let i = 0; i < 55; i++) {
        const d = document.createElement('div');
        d.className = 'drop';
        d.style.cssText = `
          left: ${Math.random() * 100}vw;
          height: ${40 + Math.random() * 80}px;
          opacity: ${0.1 + Math.random() * 0.4};
          animation-duration: ${0.8 + Math.random() * 1.6}s;
          animation-delay: ${-Math.random() * 3}s;
        `;
        bg.appendChild(d);
      }
    })();

    /* â”€â”€ Prediction form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    const form      = document.getElementById('predictForm');
    const btn       = document.getElementById('submitBtn');
    const resultBox = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      btn.classList.add('loading');
      document.getElementById('btnText').textContent = 'Analysing...';
      resultBox.style.display = 'none';

      const payload = {};
      FEATURES.forEach(f => {
        payload[f.key] = parseFloat(document.getElementById(f.key).value);
      });

      try {
        const res  = await fetch('/predict', {
          method:  'POST',
          headers: { 'Content-Type': 'application/json' },
          body:    JSON.stringify(payload),
        });
        const data = await res.json();

        if (data.error) throw new Error(data.error);

        const isFlood    = data.prediction === 1;
        const confidence = data.confidence;

        /* Apply classes */
        resultBox.className = 'result ' + (isFlood ? 'flood' : 'no-flood');

        document.getElementById('resultIcon').textContent  = isFlood ? 'ğŸŒŠ' : 'âœ…';
        document.getElementById('resultTitle').textContent = data.label;
        document.getElementById('resultSubtitle').textContent =
          `XGBoost Prediction Â· ${new Date().toLocaleTimeString()}`;

        document.getElementById('confidenceLabel').textContent =
          `Model Confidence: ${confidence}%`;
        setTimeout(() => {
          document.getElementById('confidenceFill').style.width = confidence + '%';
        }, 80);

        document.getElementById('resultAdvice').textContent = isFlood
          ? 'âš ï¸ High flood risk detected based on the rainfall patterns. Authorities should issue flood alerts and activate emergency response plans. Residents in low-lying areas should consider evacuation.'
          : 'âœ… Current rainfall data indicates low flood risk. Continue monitoring weather patterns and maintain drainage systems as a precautionary measure.';

        resultBox.style.display = 'block';

      } catch (err) {
        alert('Prediction failed: ' + err.message);
      } finally {
        btn.classList.remove('loading');
        document.getElementById('btnText').textContent = 'Predict Flood Risk';
      }
    });
  </script>
</body>
</html>
